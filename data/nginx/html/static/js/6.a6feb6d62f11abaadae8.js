webpackJsonp([6],{Bfmo:function(e,t){},X5cc:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("zyf1"),o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"rightProblemListConfig"},[s("el-row",[s("el-row",{staticClass:"head"},[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"title"},[s("span",[e._v(e._s(e.title))])])]),e._v(" "),s("el-col",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],attrs:{span:3,offset:17}},[s("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:e.addProblem}},[e._v("+ 添加题目")])],1)],1),e._v(" "),s("el-row",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.problemList,"empty-text":"NO DATA"}},[s("el-table-column",{attrs:{align:"left","header-align":"left",fixed:"",prop:"problemId",label:"ID",sortable:"",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{align:"left","header-align":"left",prop:"problemTitle",label:"标题",width:"220"}}),e._v(" "),s("el-table-column",{attrs:{align:"left","header-align":"left",prop:"problemAuthor",label:"作者",width:"160"}}),e._v(" "),s("el-table-column",{attrs:{align:"left","header-align":"left",prop:"problemCreateTime",label:"创建时间",width:"160"}}),e._v(" "),s("el-table-column",{attrs:{align:"left","header-align":"left",label:"是否可见",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(s){e.switchChange(t.$index,e.problemList)}},model:{value:t.row.problemIsShow,callback:function(s){e.$set(t.row,"problemIsShow",s)},expression:"scope.row.problemIsShow"}})]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"left","header-align":"left",fixed:"right",label:"选项"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tooltip",{attrs:{content:"编辑",placement:"top"}},[s("el-button",{staticStyle:{padding:"8px 15px"},attrs:{icon:"el-icon-edit",size:"small"},nativeOn:{click:function(s){s.preventDefault(),e.edit(t.row.problemId)}}})],1),e._v(" "),s("el-tooltip",{attrs:{content:"删除",placement:"top"}},[s("el-button",{staticStyle:{padding:"8px 15px"},attrs:{icon:"el-icon-delete",size:"small"},nativeOn:{click:function(s){s.preventDefault(),e.deleteRow(t.row.problemId)}}})],1),e._v(" "),s("el-tooltip",{attrs:{content:"下载case",placement:"top"}},[s("el-button",{staticStyle:{padding:"8px 15px"},attrs:{icon:"el-icon-download",size:"small"},nativeOn:{click:function(s){s.preventDefault(),e.download(t.row.problemId)}}})],1),e._v(" "),s("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],attrs:{content:"添加到题库中",placement:"top"}},[s("el-button",{staticStyle:{padding:"8px 15px"},attrs:{icon:"el-icon-circle-plus-outline",size:"small"},nativeOn:{click:function(s){s.preventDefault(),e.addToProblems(t.$index,e.problemList,t.row.problemId)}}})],1)]}}])})],1)],1)],1),e._v(" "),s("el-row",[s("div",{staticClass:"block pull-right"},[s("el-pagination",{attrs:{background:"","current-page":e.page.currentPage,"page-size":e.page.pageSize,layout:"prev, pager, next, jumper",total:e.page.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.page,"currentPage",t)}}})],1)])],1)},staticRenderFns:[]};var a=function(e){s("Bfmo")},r=s("VU/8")(n.a,o,!1,a,null,null);t.default=r.exports},zyf1:function(e,t,s){"use strict";(function(e){var n=s("rwyn");s.n(n),s("5SB6");t.a={name:"",data:function(){return{show:!1,title:"题目管理",searchContent:"",problemList:[],page:{currentPage:1,pageSize:1,total:1}}},mounted:function(){this.setList()},methods:{setList:function(){-1!=this.$route.path.indexOf("contest")?(this.show=!0,this.setContestProblemList()):(this.show=!1,this.setProblemList())},switchChange:function(t,s){var n=this,o=s[t].problemId,a=s[t].problemIsShow;e.ajax({type:"post",xhrFields:{withCredentials:this.$CORS},crossDomain:this.$CORS,async:!0,url:"http://"+this.$HOST+"/backend/changeShowProblem",dataType:"json",data:{problemId:o,problemIsShow:a},success:function(e){null!=e.success&&n.$message({type:"success",message:"题目"+o+"状态变为"+(a?"可见":"不可见")})},error:function(e){n.$message({type:"error",message:null==e.responseJSON?"系统错误":e.responseJSON.message})}})},handleCurrentChange:function(e){var t=this.$route.path;t=t.substr(0,t.lastIndexOf("/"))+"/"+e,this.$router.push(t)},setContestProblemList:function(){var t=this,s=this.$route.params.id,n=this.$route.params.contestId;e.ajax({type:"get",xhrFields:{withCredentials:this.$CORS},crossDomain:this.$CORS,url:"http://"+this.$HOST+"/backend/contest/"+n+"/problemList/"+s,dataType:"json",success:function(e){t.problemList=[],null!=e.success?(t.page=e.pagination,t.problemList=e.problemList):null!=e.error&&t.$message({type:"error",message:e.error})},error:function(e){t.$message({type:"错误",message:"系统错误"})}})},setProblemList:function(){var t=this;e.ajax({type:"get",xhrFields:{withCredentials:this.$CORS},crossDomain:this.$CORS,url:"http://"+this.$HOST+"/backend/problemList/"+this.$route.params.id,dataType:"json",success:function(e){t.problemList=[],null!=e.success?(t.page=e.pagination,t.problemList=e.problemList):null!=e.error&&t.$message({type:"error",message:e.error})},error:function(e){t.$message({type:"错误",message:"系统错误"})}})},addProblem:function(){var e="/backend/contest/"+this.$route.params.contestId+"/createProblem";this.$router.push(e)},addToProblems:function(t,s,n){var o=this;this.$confirm("您确定要添加到题库中吗？添加后此题将不属于该比赛私有题，将所有人可见, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.ajax({type:"post",xhrFields:{withCredentials:o.$CORS},crossDomain:o.$CORS,url:"http://"+o.$HOST+"/backend/addToProblems/"+n,dataType:"json",success:function(e){null!=e.success?(o.setContestProblemList(),o.$message({type:"success",message:e.success})):null!=e.error&&o.$message({type:"error",message:e.error})},error:function(e){o.$message({type:"错误",message:"系统错误"})}})}).catch(function(){o.$message({type:"info",message:"取消删除"})})},download:function(e){},edit:function(e){this.$router.push("/backend/editProblem/"+e)},deleteRow:function(t){var s=this;this.$confirm("此操作将永久删除该题目包括其提交记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.ajax({type:"post",xhrFields:{withCredentials:s.$CORS},crossDomain:s.$CORS,url:"http://"+s.$HOST+"/backend/deleteProblem/"+t,dataType:"json",success:function(e){null!=e.success?(s.setProblemList(),s.$message({type:"success",message:e.success})):null!=e.error&&s.$message({type:"error",message:e.error})},error:function(e){s.$message({type:"错误",message:"系统错误"})}})}).catch(function(){s.$message({type:"info",message:"取消删除"})})}},watch:{$route:function(e,t){this.setList()}}}}).call(t,s("7t+N"))}});