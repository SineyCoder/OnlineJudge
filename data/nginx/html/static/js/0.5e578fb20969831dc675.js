webpackJsonp([0],{"6E/E":function(e,t,s){"use strict";(function(e){var o=s("Dd8w"),a=s.n(o),i=s("bOdI"),r=s.n(i),n=s("NYxO");t.a={name:"TopNav",data:function(){var e,t=this,s=function(e,t,s){""==t?s(new Error("当前区域必须填写")):/^\-??\d{1,4}$/.test(t)?s():s(new Error("验证码只能是数字，且只有1-4个数字"))};return e={captcha:"http://"+this.$HOST+"/common/captcha?"+100*Math.random(),brand:"Ecoder",brandLink:"#",searchText:"",title:"",searchs:{switch:!1,visible:!1,tableData:[]},links:{},users:{id:1e3,name:"xxx"},dialogLogin:{visible:!1,loading:!1,form:{userName:"",userPwd:"",captcha:""},rules:{userName:[{min:4,max:10,message:"用户名必须在4-10个字母",trigger:"change"}],userPwd:[{min:6,max:16,message:"密码必须在6-16位之间",trigger:"change"}],captcha:[{validator:s,trigger:"change"}]}},dialogRegister:{visible:!1,loading:!1,form:{userName:"",userEmail:"",userPwd:"",userPwd_:"",captcha:""},rules:{userName:[{validator:function(e,t,s){"guest"==t?s(new Error("您不能使用guest作为用户名注册")):/^[a-zA-Z_][a-zA-Z0-9_]{4,9}$/.test(t)?s():s(new Error("长度必须在5-10个字符，且是字母或_开头"))},trigger:"change"}],userPwd:[{validator:function(e,t,s){t.length<6||t.length>15?s(new Error("密码必须在6-16位之间")):/^[0-9]{6,16}$|^[a-zA-Z]{6,16}$/.test(t)?s(new Error("密码太弱！您的密码全部都是数字或者字母")):s()},trigger:"change"}],userPwd_:[{validator:function(e,s,o){""==s?o(new Error("当前区域必须填写")):s!==t.dialogRegister.form.userPwd?o(new Error("2次密码不匹配")):o()},trigger:"change"}],captcha:[{validator:s,trigger:"change"}],userEmail:[{required:!0,type:"email",message:"邮箱填写不正确",trgger:"change"}]}},dialogForget:{visible:!1,loading:!1,form:{userEmail:"",captcha:"",option:"send"},rules:{captcha:[{validator:s,trigger:"change"}],userEmail:[{required:!0,type:"email",message:"邮箱填写不正确",trgger:"change"}]}}},r()(e,"links",{"1-1":function(){t.dialogLogin.visible=!0},"1-2":function(){t.dialogRegister.visible=!0},"2-1":function(){t.$router.push("/")},"2-2":function(){t.$router.push("/submit/"+t.user.userName+"/1")},"2-3":function(){t.exit()},"3-1":function(){t.$router.push("/")},"3-2":function(){t.$router.push("/submit/"+t.user.userName+"/1")},"3-3":function(){t.$router.push("/backend/server")},"3-4":function(){t.exit()}}),r()(e,"dialogs",["dialogLogin","dialogRegister","dialogForget"]),e},computed:a()({},Object(n.c)(["user","image"])),methods:a()({},Object(n.b)(["UPDATE","UPDATE_IMAGE"]),{exit:function(){var t=this;e.ajax({type:"post",xhrFields:{withCredentials:this.$CORS},crossDomain:this.$CORS,url:"http://"+this.$HOST+"/userPrivate/exit",dataType:"json",success:function(e){if(null!=e.error)t.$message({type:"error",message:e.error});else if(null!=e.success){t.UPDATE({userName:"guest",userGrant:"0"}),t.UPDATE_IMAGE("http://"+t.$HOST+"/common/showUserImage/"+t.$route.params.name),t.$message({type:"success",message:e.success}),t.$router.push("/")}},error:function(e){t.$message({type:"error",message:null==e.responseJSON?"系统错误":e.responseJSON.message})}})},allReset:function(){for(var e=0;e<this.dialogs.length;e++)null!=this.$refs[this.dialogs[e]]&&this.$refs[this.dialogs[e]].resetFields()},closeDialog:function(e){e(),this.changeCaptcha(),this.allReset()},changeCaptcha:function(){this.captcha="http://"+this.$HOST+"/common/captcha?"+1e4*Math.random()},handleSelect:function(e){this.links[e]()},register:function(t){var s=this;this.$refs[t].validate(function(t){if(!t)return!1;s.dialogRegister.loading=!0,e.ajax({type:"post",xhrFields:{withCredentials:s.$CORS},crossDomain:s.$CORS,async:!0,url:"http://"+s.$HOST+"/user/register",dataType:"json",data:s.dialogRegister.form,success:function(e){null!=e.success?(s.dialogRegister.visible=!1,s.$message({message:e.success,type:"success"}),s.allReset()):s.$message({message:e.error,type:"error"}),s.dialogRegister.loading=!1},error:function(e){s.$message({type:"error",message:null==e.responseJSON?"System Error":e.responseJSON.message})}})})},login:function(t){var s=this;this.$refs[t].validate(function(t){if(!t)return!1;s.dialogLogin.loading=!0,e.ajax({type:"post",xhrFields:{withCredentials:s.$CORS},crossDomain:s.$CORS,async:!0,url:"http://"+s.$HOST+"/user/login",dataType:"json",data:s.dialogLogin.form,success:function(e){if(null!=e.success){s.dialogLogin.visible=!1;var t=e.user;null!=t.infoSchoolName&&(t.infoSchoolName=JSON.parse(t.infoSchoolName)),s.UPDATE(t),s.startAlert()}else s.$message({message:e.error,type:"error"});s.dialogLogin.loading=!1},error:function(e){s.$message({type:"error",message:null==e.responseJSON?"System Error":e.responseJSON.message})}})})},forget:function(t){var s=this;this.$refs[t].validate(function(t){if(!t)return!1;s.dialogForget.loading=!0,e.ajax({type:"post",xhrFields:{withCredentials:s.$CORS},crossDomain:s.$CORS,async:!0,url:"http://"+s.$HOST+"/user/forget",dataType:"json",data:s.dialogForget.form,success:function(e){null!=e.success?(s.dialogForget.visible=!1,s.$message({message:e.success,type:"success"}),s.allReset()):s.$message({message:e.error,type:"error"}),s.dialogForget.loading=!1},error:function(e){s.$message({type:"error",message:"System Error"})}})})},startAlert:function(){this.$message({type:"success",message:"重定向至主页，以重新加载您的数据."}),this.$router.push("/")},isClose:function(){this.searchs.switch||(this.searchs.visible=!1)},search:function(){var t=this;""!=this.searchText?(this.searchs.visible=!0,e.ajax({type:"get",xhrFields:{withCredentials:this.$CORS},crossDomain:this.$CORS,async:!0,url:"http://"+this.$HOST+"/common/search",dataType:"json",data:{keywords:this.searchText},success:function(e){null!=e.records&&(t.searchs.tableData=e.records)},error:function(e){t.$message({type:"error",message:"系统错误"})}})):this.$message({type:"info",message:"您还没输入内容"})}})}}).call(t,s("7t+N"))},"8cHa":function(e,t){},"9Ylh":function(e,t){},"9bBU":function(e,t,s){s("mClu");var o=s("FeBl").Object;e.exports=function(e,t,s){return o.defineProperty(e,t,s)}},C4MV:function(e,t,s){e.exports={default:s("9bBU"),__esModule:!0}},ClUy:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("PXyv"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mainUser"},[t("div",[t("TopNav")],1),this._v(" "),t("el-row",[t("el-col",{staticClass:"left",attrs:{span:4}},[t("router-view",{attrs:{name:"left"}})],1),this._v(" "),t("el-col",{staticClass:"right",attrs:{span:20}},[t("transition",{attrs:{name:"el-zoom-in-top",mode:"out-in"}},[t("router-view",{attrs:{name:"right"}})],1)],1)],1)],1)},staticRenderFns:[]};var i=function(e){s("8cHa")},r=s("VU/8")(o.a,a,!1,i,null,null);t.default=r.exports},PXyv:function(e,t,s){"use strict";(function(e){var o=s("Dd8w"),a=s.n(o),i=s("aEvi"),r=s("NYxO");function n(){var e=document.documentElement.clientHeight||document.body.clientHeight,t=document.querySelector(".topNav").clientHeight;document.querySelector(".left").style.height=e-t+"px",document.querySelector(".right").style.height=e-t+"px"}t.a={name:"MainUser",components:{TopNav:i.a},data:function(){return{websocket:null}},computed:a()({},Object(r.c)(["user","image"])),methods:a()({},Object(r.b)(["UPDATE"]),{verify:function(){var t=this;e.ajax({type:"get",xhrFields:{withCredentials:this.$CORS},crossDomain:this.$CORS,async:!1,url:"http://"+this.$HOST+"/common/verify",dataType:"json",success:function(e){var s=e.user;null==s?(null!=t.websocket&&t.websocket.close(),s={userName:"guest",userGrant:"0"}):null!=s.infoSchoolName&&""!=s.infoSchoolName&&(s.infoSchoolName=JSON.parse(s.infoSchoolName)),t.UPDATE(s),"guest"!=t.user.userName&&null==t.websocket&&t.initWebsocket(t.user.userName)},error:function(e){t.$message({type:"error",message:null==e.responseJSON?"系统错误":e.responseJSON.message})}}),/^\/backend/.test(this.$route.path)&&"1"!=this.user.userGrant&&(this.$router.push("/"),this.$message({type:"error",message:"您不是管理员，此操作不被允许!"}))},initWebsocket:function(e){var t="ws://"+this.$SOCKET+"/websocket/"+e;this.websocket=new WebSocket(t),this.websocket.onmessage=this.webscoketToMessage,this.websocket.onclose=this.websocketClose},webscoketToMessage:function(e){this.$notify.info({title:"您有一则消息",message:e.data,duration:0})},websocketClose:function(e){this.websocket=null,this.verify()}}),beforeMount:function(){this.verify()},mounted:function(){n(),window.onresize=function(){n()}},watch:{$route:function(e,t){this.verify()}}}}).call(t,s("7t+N"))},aEvi:function(e,t,s){"use strict";var o=s("6E/E"),a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"topNav"},[s("el-row",[s("el-col",{staticClass:"TopNav-move",attrs:{span:4}},[s("a",{staticClass:"brand",attrs:{href:e.brandLink}},[e._v(e._s(e.brand))])]),e._v(" "),s("el-col",{staticClass:"TopNav-move",attrs:{span:6}},[s("el-input",{attrs:{maxlength:10,placeholder:"请输入要搜索的题目或内容",clearable:""},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),e._v(" "),s("el-col",{staticClass:"TopNav-move",attrs:{span:1}},[s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.search()}}},[e._v("搜索")])],1),e._v(" "),s("el-dialog",{attrs:{title:"查询到相关的题目",visible:e.searchs.visible,width:"50%"},on:{"update:visible":function(t){e.$set(e.searchs,"visible",t)}}},[s("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n          关闭：点击链接后会自动关闭搜索结果框"),s("br"),e._v("\n          开启：点击链接后不会自动关闭搜索结果框\n        ")]),e._v(" "),s("el-switch",{attrs:{"active-text":"开启","inactive-text":"关闭"},model:{value:e.searchs.switch,callback:function(t){e.$set(e.searchs,"switch",t)},expression:"searchs.switch"}})],1),e._v(" "),s("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.searchs.tableData}},[s("el-table-column",{attrs:{align:"left","header-align":"left",label:"ID",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("router-link",{attrs:{to:"/coding/"+t.row.problemId},nativeOn:{click:function(t){return e.isClose(t)}}},[e._v(e._s(t.row.problemId))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"left","header-align":"left",label:"题目",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("router-link",{attrs:{to:"/coding/"+t.row.problemId},nativeOn:{click:function(t){return e.isClose(t)}}},[e._v(e._s(t.row.problemTitle))])]}}])})],1)],1),e._v(" "),s("el-col",{attrs:{offset:11,span:2}},[s("el-menu",{staticClass:"el-menu-demo dropdown",staticStyle:{float:"right","background-color":"#F8F8F8"},attrs:{mode:"horizontal"},on:{select:e.handleSelect}},["guest"==e.user.userName?s("el-submenu",{attrs:{index:"1"}},[s("template",{slot:"title"},[e._v(e._s(e.user.userName))]),e._v(" "),s("el-menu-item",{attrs:{index:"1-1"}},[e._v("登录")]),e._v(" "),s("el-menu-item",{attrs:{index:"1-2"}},[e._v("注册")])],2):"0"==e.user.userGrant?s("el-submenu",{attrs:{index:"1"}},[s("template",{slot:"title"},[e._v(e._s(e.user.userName))]),e._v(" "),s("el-menu-item",{attrs:{index:"2-1"}},[e._v("主页")]),e._v(" "),s("el-menu-item",{attrs:{index:"2-2"}},[e._v("我的提交")]),e._v(" "),s("el-menu-item",{attrs:{index:"2-3"}},[e._v("退出")])],2):s("el-submenu",{attrs:{index:"2"}},[s("template",{slot:"title"},[e._v(e._s(e.user.userName))]),e._v(" "),s("el-menu-item",{attrs:{index:"3-1"}},[e._v("主页")]),e._v(" "),s("el-menu-item",{attrs:{index:"3-2"}},[e._v("我的提交")]),e._v(" "),s("el-menu-item",{attrs:{index:"3-3"}},[e._v("后台管理")]),e._v(" "),s("el-menu-item",{attrs:{index:"3-4"}},[e._v("退出")])],2)],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"登录",visible:e.dialogLogin.visible,width:"25%","before-close":e.closeDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.$set(e.dialogLogin,"visible",t)},open:function(t){e.changeCaptcha()}}},[s("el-form",{ref:"dialogLogin",attrs:{"status-icon":"",model:e.dialogLogin.form,rules:e.dialogLogin.rules}},[s("el-form-item",{attrs:{prop:"userName"}},[s("el-input",{attrs:{"prefix-icon":"iconfont icon-yonghu","auto-complete":"off",placeholder:"用户名"},model:{value:e.dialogLogin.form.userName,callback:function(t){e.$set(e.dialogLogin.form,"userName",t)},expression:"dialogLogin.form.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"userPwd"}},[s("el-input",{attrs:{"prefix-icon":"iconfont icon-icon-","auto-complete":"off",placeholder:"密码",type:"password"},model:{value:e.dialogLogin.form.userPwd,callback:function(t){e.$set(e.dialogLogin.form,"userPwd",t)},expression:"dialogLogin.form.userPwd"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"captcha"}},[s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{"prefix-icon":"iconfont icon-yanzhengma","auto-complete":"off",placeholder:"验证码"},model:{value:e.dialogLogin.form.captcha,callback:function(t){e.$set(e.dialogLogin.form,"captcha",t)},expression:"dialogLogin.form.captcha"}})],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("a",{attrs:{href:"javascript:void(0);"}},[s("img",{staticStyle:{width:"100%",height:"40px"},attrs:{src:e.captcha,alt:"none"},on:{click:e.changeCaptcha}})])])],1)],1),e._v(" "),s("el-row",[s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLogin.loading,expression:"dialogLogin.loading"}],staticClass:"full",attrs:{type:"primary",round:""},on:{click:function(t){e.login("dialogLogin")}}},[e._v("登录")])],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogLogin.visible=!1,e.dialogRegister.visible=!0}}},[e._v("还没注册？点击这儿！")])],1),e._v(" "),s("el-col",{attrs:{span:6,offset:6}},[s("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogLogin.visible=!1,e.dialogForget.visible=!0}}},[e._v("忘记密码？")])],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"注册",visible:e.dialogRegister.visible,width:"25%","before-close":e.closeDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.$set(e.dialogRegister,"visible",t)},open:function(t){e.changeCaptcha()}}},[s("el-form",{ref:"dialogRegister",attrs:{"status-icon":"",model:e.dialogRegister.form,rules:e.dialogRegister.rules}},[s("el-form-item",{attrs:{prop:"userName"}},[s("el-input",{attrs:{name:"userName","prefix-icon":"iconfont icon-yonghu","auto-complete":"off",placeholder:"用户名"},model:{value:e.dialogRegister.form.userName,callback:function(t){e.$set(e.dialogRegister.form,"userName",t)},expression:"dialogRegister.form.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"userEmail"}},[s("el-input",{attrs:{name:"userEmail","prefix-icon":"iconfont icon-youxiang","auto-complete":"off",placeholder:"邮箱"},model:{value:e.dialogRegister.form.userEmail,callback:function(t){e.$set(e.dialogRegister.form,"userEmail",t)},expression:"dialogRegister.form.userEmail"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"userPwd"}},[s("el-input",{attrs:{name:"userPwd","prefix-icon":"iconfont icon-icon-","auto-complete":"off",placeholder:"密码",type:"password"},model:{value:e.dialogRegister.form.userPwd,callback:function(t){e.$set(e.dialogRegister.form,"userPwd",t)},expression:"dialogRegister.form.userPwd"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"userPwd_"}},[s("el-input",{attrs:{"prefix-icon":"iconfont icon-icon-","auto-complete":"off",placeholder:"再次输入密码",type:"password"},model:{value:e.dialogRegister.form.userPwd_,callback:function(t){e.$set(e.dialogRegister.form,"userPwd_",t)},expression:"dialogRegister.form.userPwd_"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"captcha"}},[s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{name:"captcha","prefix-icon":"iconfont icon-yanzhengma","auto-complete":"off",placeholder:"验证码"},model:{value:e.dialogRegister.form.captcha,callback:function(t){e.$set(e.dialogRegister.form,"captcha",t)},expression:"dialogRegister.form.captcha"}})],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("a",{attrs:{href:"javascript:void(0);"}},[s("img",{staticStyle:{width:"100%",height:"40px"},attrs:{src:e.captcha,alt:"none"},on:{click:e.changeCaptcha}})])])],1)],1),e._v(" "),s("el-row",[s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogRegister.loading,expression:"dialogRegister.loading"}],staticClass:"full",attrs:{type:"primary",round:""},on:{click:function(t){e.register("dialogRegister")}}},[e._v("注册")])],1),e._v(" "),s("el-row",[s("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogLogin.visible=!0,e.dialogRegister.visible=!1}}},[e._v("已注册？点击这儿！")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"忘记密码",visible:e.dialogForget.visible,width:"25%","before-close":e.closeDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.$set(e.dialogForget,"visible",t)},open:function(t){e.changeCaptcha()}}},[s("el-form",{ref:"dialogForget",attrs:{"status-icon":"",model:e.dialogForget.form,rules:e.dialogForget.rules}},[s("el-form-item",{attrs:{prop:"userEmail"}},[s("el-input",{attrs:{name:"userEmail","prefix-icon":"iconfont icon-youxiang","auto-complete":"off",placeholder:"userEmail"},model:{value:e.dialogForget.form.userEmail,callback:function(t){e.$set(e.dialogForget.form,"userEmail",t)},expression:"dialogForget.form.userEmail"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"captcha"}},[s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{name:"captcha","prefix-icon":"iconfont icon-yanzhengma","auto-complete":"off",placeholder:"captcha"},model:{value:e.dialogForget.form.captcha,callback:function(t){e.$set(e.dialogForget.form,"captcha",t)},expression:"dialogForget.form.captcha"}})],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("a",{attrs:{href:"javascript:void(0);"}},[s("img",{staticStyle:{width:"100%",height:"40px"},attrs:{src:e.captcha,alt:"none"},on:{click:e.changeCaptcha}})])])],1),e._v(" "),s("el-form-item",[s("el-radio-group",{attrs:{size:"small",name:"option"},model:{value:e.dialogForget.form.option,callback:function(t){e.$set(e.dialogForget.form,"option",t)},expression:"dialogForget.form.option"}},[s("el-radio",{attrs:{label:"send",border:""}},[e._v("发送用户名")]),e._v(" "),s("el-radio",{attrs:{label:"reset",border:""}},[e._v("重置密码")])],1)],1)],1),e._v(" "),s("el-row",[s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogForget.loading,expression:"dialogForget.loading"}],staticClass:"full",attrs:{type:"primary",round:""},on:{click:function(t){e.forget("dialogForget")}}},[e._v("Go")])],1)],1)],1)},staticRenderFns:[]};var i=function(e){s("9Ylh")},r=s("VU/8")(o.a,a,!1,i,null,null);t.a=r.exports},bOdI:function(e,t,s){"use strict";t.__esModule=!0;var o,a=s("C4MV"),i=(o=a)&&o.__esModule?o:{default:o};t.default=function(e,t,s){return t in e?(0,i.default)(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}},mClu:function(e,t,s){var o=s("kM2E");o(o.S+o.F*!s("+E39"),"Object",{defineProperty:s("evD5").f})}});