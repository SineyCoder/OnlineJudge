webpackJsonp([13],{ECoS:function(e,t){},k13Y:function(e,t,a){"use strict";(function(e){t.a={data:function(){return{loading:!0,users:[],page:{currentPage:1,pageSize:1,total:1},update:{visible:!1,index:"",form:{userId:"",userGrant:""}},options1:[{label:"普通用户",value:0},{label:"超级管理员",value:1}],input1:"",title:"用户管理"}},methods:{toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e,this.multipleSelection.forEach(function(e){})},deleteRow:function(t,a){var s=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.ajax({type:"post",xhrFields:{withCredentials:s.$CORS},crossDomain:s.$CORS,async:!0,url:"http://"+s.$HOST+"/backend/deleteUser",dataType:"json",data:{userId:a[t].userId},success:function(e){null!=e.success?(s.$message({type:"success",message:e.success}),a.splice(t,1)):null!=e.error&&s.$message({type:"error",message:e.error})},error:function(e){s.$message({title:"error",message:null==e.responseJSON?"系统错误":e.responseJSON.message})}})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})},handleCurrentChange:function(e){var t=this.$route.path;t=t.substr(0,t.lastIndexOf("/"))+"/"+e,this.$router.push(t)},openUpdateDialog:function(e,t){this.update.visible=!0,this.update.form.userGrant=parseInt(t[e].userGrant),this.update.form.userId=t[e].userId,this.update.index=e},updateUser:function(){var t=this;e.ajax({type:"post",xhrFields:{withCredentials:this.$CORS},crossDomain:this.$CORS,async:!0,url:"http://"+this.$HOST+"/backend/saveUser",dataType:"json",data:this.update.form,success:function(e){null!=e.success?(t.update.visible=!1,t.users[t.update.index].userGrant=t.update.form.userGrant,t.$message({type:"success",message:"权限已经更改"})):null!=e.error&&t.$message({type:"error",message:e.error})},error:function(e){t.$message({type:"error",message:null==e.responseJSON?"系统错误":e.responseJSON.message})}})},setInfo:function(){var t=this,a=this.returnUrl();this.tableData=[],this.loading=!0,e.ajax({type:"get",xhrFields:{withCredentials:this.$CORS},crossDomain:this.$CORS,async:!0,url:a,dataType:"json",success:function(e){t.users=e.users,t.page=e.pagination,t.loading=!1},error:function(e){t.$message({type:"error",message:null==e.responseJSON?"系统错误":e.responseJSON.message})}})},returnUrl:function(){return"http://"+this.$HOST+this.$route.path}},mounted:function(){this.setInfo()},watch:{$route:function(e,t){this.setInfo()}}}}).call(t,a("7t+N"))},m6zP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("k13Y"),n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"rightUserConfig"},[a("el-row",[a("el-row",{staticClass:"head",staticStyle:{"border-top-left-radius":"3px","border-top-right-radius":"3px"}},[a("div",{staticClass:"pull-left",staticStyle:{position:"relative",top:"8px",lef:"0px"}},[a("div",{staticClass:"title"},[a("span",[e._v(e._s(e.title))])])])]),e._v(" "),a("el-row",[[a("el-table",{ref:"users",staticStyle:{width:"100%"},attrs:{"empty-text":"无数据",data:e.users,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"left","header-align":"left",prop:"userId",label:"ID",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{align:"left","header-align":"left",prop:"userName",label:"用户名",width:"85"}}),e._v(" "),a("el-table-column",{attrs:{align:"left","header-align":"left",prop:"createTime",label:"创建时间",width:"155"}}),e._v(" "),a("el-table-column",{attrs:{align:"left","header-align":"left",prop:"lastLogin",label:"上次登录",width:"155"}}),e._v(" "),a("el-table-column",{attrs:{align:"left","header-align":"left",prop:"infoRealName",label:"真实姓名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"left","header-align":"left",prop:"userEmail",label:"邮箱"}}),e._v(" "),a("el-table-column",{attrs:{align:"left","header-align":"left",label:"权限",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1==t.row.userGrant?"超级管理员":"普通用户")+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","header-align":"left",fixed:"right",label:"Option",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"8px 15px"},attrs:{icon:"el-icon-edit",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.openUpdateDialog(t.$index,e.users)}}},[e._v("\n                权限修改\n              ")]),a("br"),e._v(" "),a("el-button",{staticStyle:{padding:"8px 15px"},attrs:{icon:"el-icon-delete",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.deleteRow(t.$index,e.users)}}},[e._v("\n                删       除\n              ")])]}}])})],1)]],2)],1),e._v(" "),a("el-row",[a("div",{staticClass:"block pull-right"},[a("el-pagination",{attrs:{background:"","current-page":e.page.currentPage,"page-size":e.page.pageSize,layout:"prev, pager, next, jumper",total:e.page.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.page,"currentPage",t)}}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:"修改权限",visible:e.update.visible,width:"25%"},on:{"update:visible":function(t){e.$set(e.update,"visible",t)}}},[a("el-form",{ref:"dialogForget",attrs:{"status-icon":"",model:e.update.form}},[a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},model:{value:e.update.form.userGrant,callback:function(t){e.$set(e.update.form,"userGrant",t)},expression:"update.form.userGrant"}},e._l(e.options1,function(e){return a("el-option",{key:e.key,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-row",[a("el-col",{attrs:{offset:18}},[a("el-button",{staticClass:"full",attrs:{type:"primary",round:""},on:{click:e.updateUser}},[e._v("保存")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var l=function(e){a("ECoS")},r=a("VU/8")(s.a,n,!1,l,null,null);t.default=r.exports}});