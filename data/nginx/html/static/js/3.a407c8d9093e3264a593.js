webpackJsonp([3],{L1p3:function(e,r){},PifJ:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("QEh9"),l={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"createProblemConfig"},[t("el-row",[t("el-row",{staticClass:"head",staticStyle:{"border-top-left-radius":"3px","border-top-right-radius":"3px"}},[t("div",{staticStyle:{position:"relative",top:"8px",lef:"0px"}},[t("div",{staticClass:"title"},[t("span",[e._v(e._s(e.title))])])])]),e._v(" "),t("el-row",{staticStyle:{padding:"15px 20px","background-color":"white",color:"#606266"}},[t("el-form",{ref:"problemForm",attrs:{"status-icon":"","label-position":e.labelposition,"label-width":"80px",model:e.problemForm,rules:e.problemRules}},[t("el-form-item",{attrs:{label:"题目标题",prop:"problemTitle"}},[t("el-input",{model:{value:e.problemForm.problemTitle,callback:function(r){e.$set(e.problemForm,"problemTitle",r)},expression:"problemForm.problemTitle"}})],1),e._v(" "),t("el-row",[t("el-form-item",{attrs:{label:"问题描述",prop:"problemDescription"}},[t("quill-editor",{ref:"problemDescription",attrs:{options:e.editorOption},model:{value:e.problemForm.problemDescription,callback:function(r){e.$set(e.problemForm,"problemDescription",r)},expression:"problemForm.problemDescription"}}),e._v(" "),t("el-input",{staticStyle:{display:"none"},model:{value:e.problemForm.problemDescription,callback:function(r){e.$set(e.problemForm,"problemDescription",r)},expression:"problemForm.problemDescription"}})],1)],1),e._v(" "),t("el-row",[t("el-form-item",{attrs:{label:"输入描述",prop:"problemInputDescription"}},[t("quill-editor",{ref:"problemInputDescription",attrs:{options:e.editorOption},model:{value:e.problemForm.problemInputDescription,callback:function(r){e.$set(e.problemForm,"problemInputDescription",r)},expression:"problemForm.problemInputDescription"}}),e._v(" "),t("el-input",{staticStyle:{display:"none"},attrs:{type:"text"},model:{value:e.problemForm.problemInputDescription,callback:function(r){e.$set(e.problemForm,"problemInputDescription",r)},expression:"problemForm.problemInputDescription"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"输出描述",prop:"problemOutputDescription"}},[t("quill-editor",{ref:"problemOutputDescription",attrs:{options:e.editorOption},model:{value:e.problemForm.problemOutputDescription,callback:function(r){e.$set(e.problemForm,"problemOutputDescription",r)},expression:"problemForm.problemOutputDescription"}}),e._v(" "),t("el-input",{staticStyle:{display:"none"},attrs:{type:"text"},model:{value:e.problemForm.problemOutputDescription,callback:function(r){e.$set(e.problemForm,"problemOutputDescription",r)},expression:"problemForm.problemOutputDescription"}})],1),e._v(" "),t("el-row",{staticStyle:{"border-left":"2px solid gray","padding-left":"5px"}},[t("el-form-item",{attrs:{label:"C/C++"}},[t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"时间限制 (second)",prop:"problemCpuTime"}},[t("el-input-number",{attrs:{"controls-position":"right",min:1,max:1e4},model:{value:e.problemForm.problemParams[0].problemCpuTime,callback:function(r){e.$set(e.problemForm.problemParams[0],"problemCpuTime",r)},expression:"problemForm.problemParams[0].problemCpuTime"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:4,offset:3}},[t("el-form-item",{attrs:{label:"内存限制 (kb)",prop:"problemMemory"}},[t("el-input-number",{attrs:{"controls-position":"right",min:1,max:512},model:{value:e.problemForm.problemParams[0].problemMemory,callback:function(r){e.$set(e.problemForm.problemParams[0],"problemMemory",r)},expression:"problemForm.problemParams[0].problemMemory"}})],1)],1)],1)],1),e._v(" "),t("el-row",{staticStyle:{"border-left":"2px solid gray","padding-left":"5px","margin-top":"20px"}},[t("el-form-item",{attrs:{label:"JAVA"}},[t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"时间限制 (second)",prop:"problemCpuTime"}},[t("el-input-number",{attrs:{"controls-position":"right",min:1,max:1e4},model:{value:e.problemForm.problemParams[2].problemCpuTime,callback:function(r){e.$set(e.problemForm.problemParams[2],"problemCpuTime",r)},expression:"problemForm.problemParams[2].problemCpuTime"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:4,offset:3}},[t("el-form-item",{attrs:{label:"内存限制 (mb)",prop:"problemMemory"}},[t("el-input-number",{attrs:{"controls-position":"right",min:1,max:512},model:{value:e.problemForm.problemParams[2].problemMemory,callback:function(r){e.$set(e.problemForm.problemParams[2],"problemMemory",r)},expression:"problemForm.problemParams[2].problemMemory"}})],1)],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"难度",prop:"problemDifficulty"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.problemForm.problemDifficulty,callback:function(r){e.$set(e.problemForm,"problemDifficulty",r)},expression:"problemForm.problemDifficulty"}},e._l(e.option,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),t("el-col",{attrs:{span:4,offset:3}},[t("el-form-item",{attrs:{label:"是否可见",prop:"problemIsShow"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.problemForm.problemIsShow,callback:function(r){e.$set(e.problemForm,"problemIsShow",r)},expression:"problemForm.problemIsShow"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-form-item",{attrs:{label:"标签",prop:"tag"}},[e._l(e.problemForm.tag,function(r){return t("el-tag",{key:r,attrs:{closable:"","disable-transitions":!1},on:{close:function(t){e.handleClose(r)}}},[e._v("\n              "+e._s(r)+"\n            ")])}),e._v(" "),e.inputVisible?t("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{maxlength:10,size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(r){return"button"in r||!e._k(r.keyCode,"enter",13,r.key,"Enter")?e.handleInputConfirm(r):null}},model:{value:e.inputValue,callback:function(r){e.inputValue=r},expression:"inputValue"}}):t("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 新标签")])],2)],1),e._v(" "),e._l(e.problemForm.problemSample,function(r,o){return t("el-row",{key:r.key,staticStyle:{border:"1px dashed gray",padding:"10px","margin-top":"10px"}},[t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"样例"+(o+1),prop:"problemSample"+(o+1)}})],1),e._v(" "),t("el-col",{attrs:{span:2,offset:16}},[t("el-button",{staticStyle:{height:"34px","padding-top":"10px","margin-left":"20px"},attrs:{type:"danger",icon:"el-icon-delete",round:""},on:{click:function(t){e.deleteSample(r)}}})],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{label:"样例输入",prop:"problemSample."+o+".input",rules:{required:!0,message:"sample input is required",trigger:"blur"}}},[t("el-input",{attrs:{type:"textarea",placeholder:"样例输入"},model:{value:r.input,callback:function(t){e.$set(r,"input",t)},expression:"item.input"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:11,offset:2}},[t("el-form-item",{attrs:{label:"样例输出",prop:"problemSample."+o+".output",rules:{required:!0,message:"sample input is required",trigger:"blur"}}},[t("el-input",{attrs:{type:"textarea",placeholder:"样例输出"},model:{value:r.output,callback:function(t){e.$set(r,"output",t)},expression:"item.output"}})],1)],1)],1)],1)}),e._v(" "),t("br"),e._v(" "),t("el-row",[t("el-button",{staticStyle:{border:"1px dashed gray",width:"100%"},on:{click:e.addSample}},[e._v("添加新样例")])],1),e._v(" "),t("br"),e._v(" "),t("el-row",[t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"spj判题",prop:"spj"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.problemForm.spj,callback:function(r){e.$set(e.problemForm,"spj",r)},expression:"problemForm.spj"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:20}},[t("el-form-item",{attrs:{label:"是否返回答案？判题错误后可以返回当前case正确答案.",prop:"returnErr"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.problemForm.returnErr,callback:function(r){e.$set(e.problemForm,"returnErr",r)},expression:"problemForm.returnErr"}})],1)],1)],1),e._v(" "),t("br"),e._v(" "),t("el-row",[t("el-form-item",{attrs:{label:"上传判题case"}},[t("el-upload",{ref:"upload",attrs:{action:"#","before-upload":e.beforeUpload,"on-remove":e.removeFile,"file-list":e.fileList,limit:1}},[t("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.uploadContent)},slot:"content"}),e._v(" "),t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1)],1),e._v(" "),t("el-row",[t("el-form-item",{attrs:{label:"提示(没有填写无)",prop:"problemHint"}},[t("quill-editor",{ref:"problemHint",attrs:{options:e.editorOption},model:{value:e.problemForm.problemHint,callback:function(r){e.$set(e.problemForm,"problemHint",r)},expression:"problemForm.problemHint"}}),e._v(" "),t("el-input",{staticStyle:{display:"none"},model:{value:e.problemForm.problemHint,callback:function(r){e.$set(e.problemForm,"problemHint",r)},expression:"problemForm.problemHint"}})],1)],1),e._v(" "),t("el-row",[t("el-form-item",{attrs:{label:"来源(没有填写无)",prop:"problemSource"}},[t("el-input",{model:{value:e.problemForm.problemSource,callback:function(r){e.$set(e.problemForm,"problemSource",r)},expression:"problemForm.problemSource"}})],1)],1)],2),e._v(" "),t("br"),e._v(" "),t("el-row",{staticStyle:{float:"right"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.submitForm("problemForm")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:function(r){e.resetForm("problemForm")}}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var i=function(e){t("L1p3")},p=t("VU/8")(o.a,l,!1,i,null,null);r.default=p.exports},QEh9:function(e,r,t){"use strict";(function(e){var o=t("mvHQ"),l=t.n(o),i=t("G0J2"),p=(t.n(i),t("GH0r"));i.Quill.register("modules/ImageExtend",p.a),r.a={components:{quillEditor:i.quillEditor},name:"CreateProblemConfig",data:function(){var e=this;return{uploadContent:"上传的文件满足1 1对应的格式且后缀为.zip的文件.<br>\n例如：1.in和1.out对应，前者表示输入，后者表示输出<br>\n如果您的题目没有输入，那么也请存遵循此规则，但是.in文件为空内容即可",fileList:[],inputValue:"",inputVisible:!1,title:"题目创建",labelposition:"top",option:[{label:"Easy",value:"easy"},{label:"Mid",value:"mid"},{label:"Difficult",value:"difficult"}],problemForm:{problemTitle:"",problemDescription:"",problemInputDescription:"",problemOutputDescription:"",problemParams:[{languageName:"C",problemCpuTime:1e3,problemMemory:64},{languageName:"C++",problemCpuTime:1e3,problemMemory:64},{languageName:"JAVA",problemCpuTime:2e3,problemMemory:64}],problemDifficulty:"Easy",problemIsShow:!0,tag:[],problemSample:[{input:"",output:""}],spj:!1,returnErr:!1,problemHint:"",problemSource:""},problemRules:{tag:[{validator:function(e,r,t){if(0==r.length)t(new Error("您的标签至少要填写一个"));else for(var o=0;o<r.length;o++)t()},trigger:"blur"}],problemTitle:[{required:!0,trigger:"blur"},{min:1,max:50,trigger:"change"}],problemDescription:[{required:!0,trigger:"change"}],problemInputDescription:[{required:!0,trigger:"change"}],problemOutputDescription:[{required:!0,trigger:"change"}],problemHint:[{required:!0,trigger:"change"}],problemSource:[{required:!0,trigger:"blur"},{min:1,max:50,trigger:"change"}]},editorOption:{modules:{ImageExtend:{loading:!0,name:"img",size:5,action:"http://"+this.$HOST+"/common/upload",response:function(e){return e},sizeError:function(){e.$message({type:"错误",message:"文件大小超过5M"})},error:function(){e.$message({type:"错误",message:"上传失败，可能是服务器出错"})}},toolbar:{container:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{color:[]},{background:[]}],[{align:[]}],["link","image"]],handlers:{image:function(){p.b.emit(this.quill.id)}}}}}}},mounted:function(){var e=this.$route.path;-1!=e.indexOf("contest")||-1!=e.indexOf("editProblem")&&this.setEditProblem()},methods:{setEditProblem:function(){var r=this;e.ajax({type:"get",xhrFields:{withCredentials:this.$CORS},crossDomain:this.$CORS,url:"http://"+this.$HOST+"/backend/getEditProblem/"+this.$route.params.id,dataType:"json",success:function(e){null!=e.success?r.setAttr(e):null!=e.error&&r.$message({type:"error",message:e.error})},error:function(e){r.$message({type:"error",message:"系统错误"})}})},setAttr:function(e){var r=this.problemForm;r.tag=[];for(var t=0;t<e.tag.length;t++)r.tag.push(e.tag[t].tagName);var o=e.problemParams;for(t=0;t<o.length;t++)"JAVA"==o[t].languageName?(r.problemParams[2].problemMemory=o[t].problemMemory/1024,r.problemParams[2].problemCpuTime=o[t].problemCpuTime):"C"==o[t].languageName&&(r.problemParams[0].problemMemory=o[t].problemMemory,r.problemParams[0].problemCpuTime=o[t].problemCpuTime);for(var l in e.records.problemSample=JSON.parse(e.records.problemSample),e.records)r[l]=e.records[l];this.uploadContent="上传文件无法修改，您必须重新上传所需要的文件<br/>或者先下载case修改完成后上传"},submitForm:function(r){var t=this;this.$refs[r].validate(function(r){var o,i,p=t.$route.path;if(-1!=p.indexOf("contest")){r=r&&1==t.fileList.length;var a=t.$route.params.contestId;o="http://"+t.$HOST+"/backend/contest/"+a+"/createProblem",i="/backend/contest/"+a+"/problemList/1"}else-1!=p.indexOf("editProblem")?(o="http://"+t.$HOST+"/backend/editProblem",i="/backend/problemList/1"):(r=r&&1==t.fileList.length,o="http://"+t.$HOST+"/backend/createProblem",i="/backend/problemList/1");if(r){var m=JSON.parse(l()(t.problemForm));m.problemParams[1].problemCpuTime=m.problemParams[0].problemCpuTime,m.problemParams[2].problemMemory=1024*m.problemParams[2].problemMemory,m.problemParams=l()(m.problemParams),m.problemSample=l()(m.problemSample),e.ajax({type:"post",xhrFields:{withCredentials:t.$CORS},crossDomain:t.$CORS,url:o,data:m,traditional:!0,dataType:"json",success:function(e){null!=e.success?(t.$router.push(i),t.$message({type:"success",message:e.success})):null!=e.error&&t.$message({type:"error",message:e.error})},error:function(e){t.$message({type:"error",message:"系统错误"})}})}else t.$message({type:"error",message:"此操作不允许，可能没有上传case"})})},resetForm:function(e){this.$refs[e].resetFields(),this.$refs.upload.clearFiles()},handleClose:function(e){this.problemForm.tag.splice(this.problemForm.tag.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(r){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue;e&&this.problemForm.tag.push(e),this.inputVisible=!1,this.inputValue=""},addSample:function(){this.problemForm.problemSample.push({input:"",output:""})},deleteSample:function(e){var r=this.problemForm.problemSample.indexOf(e);-1!=r&&this.problemForm.problemSample.splice(r,1)},beforeUpload:function(r){var t=this,o=r.name;if(/.zip$/.test(o)&&r.size<5242880){var l=new FormData;l.append("file",r),e.ajax({type:"post",xhrFields:{withCredentials:this.$CORS},crossDomain:this.$CORS,url:"http://"+this.$HOST+"/backend/upload",data:l,chache:!1,processData:!1,contentType:!1,dataType:"json",success:function(e){t.fileList=[{name:r.name,url:"#"}],null!=e.error&&(t.fileList=[],t.$message({type:"错误",message:e.error}))},error:function(e){t.fileList=[],t.$message({type:"错误",message:null==e.responseJSON?"系统错误":e.responseJSON.message})}})}else this.$message({type:"错误",message:"你上传的文件不被允许 !"});return!1},removeFile:function(){this.fileList=[]}}}}).call(r,t("7t+N"))},mvHQ:function(e,r,t){e.exports={default:t("qkKv"),__esModule:!0}},qkKv:function(e,r,t){var o=t("FeBl"),l=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return l.stringify.apply(l,arguments)}}});